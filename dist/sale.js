webpackJsonp([24],{107:function(t,a,i){"use strict";function e(t){i(335)}Object.defineProperty(a,"__esModule",{value:!0});var s=i(337),n=i(338),o=i(14),r=e,l=o(s.a,n.a,!1,r,"data-v-a2519b42",null);a.default=l.exports},335:function(t,a,i){var e=i(336);"string"==typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);i(13)("60ef66c4",e,!0)},336:function(t,a,i){a=t.exports=i(1)(void 0),a.push([t.i,".sale[data-v-a2519b42]{display:flex;flex-direction:column;align-items:center}.sale div[data-v-a2519b42]{color:#333;font-size:14px}.sale .title-container[data-v-a2519b42]{position:relative;display:flex;justify-content:center;width:1024px;height:88px;background-color:#fff;border-bottom:1px solid #d8d8d8}.sale .title-container .title[data-v-a2519b42]{position:relative;display:flex;justify-content:center;align-items:center;width:1024px;height:100%;color:#ed6337;font-size:20px}.sale .title-container .logo[data-v-a2519b42]{position:absolute;left:10px;top:10px;height:calc(100% - 20px);width:auto}.sale .list[data-v-a2519b42]{width:1024px;min-height:400px}.sale .list .filters[data-v-a2519b42]{display:flex;flex-wrap:wrap;align-items:center;width:1024px;height:60px;padding:0 46px;background:#fff}.sale .list .filters .city-selected[data-v-a2519b42],.sale .list .filters .city[data-v-a2519b42]{width:44px;line-height:20px;margin-left:50px;text-align:center;cursor:pointer}.sale .list .filters .city-selected[data-v-a2519b42]{color:#fff;background:#ff5502}.sale .list .items[data-v-a2519b42]{display:flex;flex-wrap:wrap;background:#fff;margin-top:10px;padding-bottom:20px}.sale .list .items .item[data-v-a2519b42]{display:flex;flex-direction:column;justify-content:space-around;width:220px;height:370px;border:1px solid #d8d8d8;margin-left:30px;margin-top:20px;padding:0 8px}.sale .list .items .item .part-img[data-v-a2519b42]{width:204px;height:204px}.sale .list .items .item .part-id[data-v-a2519b42]{font-size:14px;color:#333;font-weight:800}.sale .list .items .item .part-annotation[data-v-a2519b42]{font-size:12px;color:#666}.sale .list .items .item>div[data-v-a2519b42]{display:flex;justify-content:space-between;align-items:center}.sale .list .items .item>div .part-address[data-v-a2519b42],.sale .list .items .item>div .part-company[data-v-a2519b42],.sale .list .items .item>div .span[data-v-a2519b42]{font-size:12px;color:#999}.sale .list .items .item>div .part-price[data-v-a2519b42]{font-size:20px;color:#ff5502}.sale .list .items .item>div .part-carriage[data-v-a2519b42]{font-size:12px;color:#999}.sale .list .items .item .cart[data-v-a2519b42]{height:35px;font-size:14px;color:#fff;letter-spacing:0}.sale .list .items .item .cart-handle[data-v-a2519b42]{height:35px;font-size:14px;color:#fff;letter-spacing:0;background-image:linear-gradient(90deg,#e9414e,#f3a533);border:1px solid #e9414e}.sale .list .items .item .cart-handle-cancle[data-v-a2519b42]{height:35px;font-size:14px;color:#fff;letter-spacing:0;background:#999;border:0}.sale .list .no-more[data-v-a2519b42]{width:1024px;height:40px;padding-bottom:20px;text-align:center;font-size:14px;color:#999;background:#fff;letter-spacing:0}.sale .list .no-more img[data-v-a2519b42]{height:100%}",""])},337:function(t,a,i){"use strict";function e(t){if(Array.isArray(t)){for(var a=0,i=Array(t.length);a<t.length;a++)i[a]=t[a];return i}return Array.from(t)}var s=i(4),n=(i.n(s),i(3)),o=(i.n(n),i(5)),r=i.n(o),l=i(8),c=Object.assign||function(t){for(var a=1;a<arguments.length;a++){var i=arguments[a];for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])}return t};a.a={data:function(){return{contentList:[],cities:[],page:1,isLoading:!1,noMore:!1,selectedCity:"全部"}},computed:c({},l.a.mapState(["appScrollTop","theme"]),{reqCity:function(){var t=this.selectedCity;return"全部"===t&&(t=""),t},titleBackground:function(){var t=this.theme.logo_background_img,a="background: url("+t+") 0 0/100% auto no-repeat;";return t&&t.length>0&&(a+="color: white;"),a}}),watch:{appScrollTop:function(t){0!==t&&t+window.innerHeight>=this.$refs.list.offsetHeight+90&&this.loadMore()}},mounted:function(){var t=this;this.contentList=[],this.aList().then(function(a){a.total_page!==t.page&&a.total_page||(t.noMore=!0),t.isLoading=!1})},methods:c({},l.a.mapMutations("cart",["updateOrders"]),l.a.mapMutations(["updateBadgeCount"]),{aList:function(t){var a=this;return u.get("/community/sailling",t).then(function(i){var s;if(i){t=t||{},t.loadMore?(s=a.contentList).push.apply(s,e(i.data)):a.contentList=i.data;var n=i.item_city;return n?n.unshift("全部"):n=[],a.cities=n,i}})},cartClick:function(t){this.handleCart({item:t})},handleCart:function(t){var a=this,i=t.item,e={p_uid:i.p_uid},s=r.a.service(),n=i.in_spcarts,o=n?"/community/spcart/del":"/community/spcart/add",l=!n,c=n?"decrease":"plus",d=n?"取消加入购物车":"加入购物车成功";return u.post(o,e).then(function(t){s.close(),t&&(a.$set(i,"in_spcarts",l),a.updateOrders({item:i,mode:c}),a.updateBadgeCount({mode:c}),a.$message.success(d))})},handleReq:function(t){var a=this;this.aList({page:this.page,address:this.reqCity,loadMore:t}).then(function(t){t.total_page!==a.page&&t.total_page||(a.noMore=!0),a.isLoading=!1}).catch(function(t){return a.isLoading=!1})},loadMore:function(){this.isLoading||this.noMore||(this.page++,this.isLoading=!0,this.handleReq(!0))},cityClass:function(t){return t===this.selectedCity?"city-selected":"city"},cityClick:function(t){this.init(),this.selectedCity=t,this.handleReq()},init:function(){this.page=1,this.noMore=!1}})}},338:function(t,a,i){"use strict";var e=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"sale"},[i("div",{staticClass:"title-container"},[i("div",{staticClass:"title",style:t.titleBackground},[t._v(t._s(t.theme.store))]),i("img",{staticClass:"logo",attrs:{src:t.theme.app_logo}})]),i("div",{ref:"list",staticClass:"list"},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.cities.length>0,expression:"cities.length > 0"}],staticClass:"filters"},[i("span",[t._v("城市：")]),t._l(t.cities,function(a,e){return i("div",{key:e,class:t.cityClass(a),on:{click:function(i){t.cityClick(a)}}},[t._v(t._s(a))])})],2),i("div",{staticClass:"items"},t._l(t.contentList,function(a,e){return i("div",{key:e,staticClass:"item"},[i("img",{staticClass:"part-img",attrs:{src:a.img,alt:"商品图片"}}),i("span",{staticClass:"part-id"},[t._v(t._s(a.pid))]),i("span",{staticClass:"part-annotation"},[t._v(t._s(a.label))]),i("div",[i("span",{staticClass:"part-company"},[t._v(t._s(a.supplier))]),i("span",{staticClass:"part-address"},[t._v(t._s(a.address))])]),i("div",[i("span",{staticClass:"part-price"},[t._v(t._s(a.prices_sale))]),i("span",{staticClass:"part-carriage"},[t._v(t._s(a.carriage))])]),a.in_spcarts?i("button",{staticClass:"cart-handle-cancle",on:{click:function(i){t.cartClick(a)}}},[t._v("取消购物车")]):i("button",{staticClass:"cart-handle",on:{click:function(i){t.cartClick(a)}}},[t._v("加入购物车")])])})),this.noMore?i("div",{staticClass:"no-more"},[t._v("已经到底了！")]):i("div",{staticClass:"no-more"},[i("img",{attrs:{src:"/static/img/loading.gif",alt:"loading"}})])])])},s=[],n={render:e,staticRenderFns:s};a.a=n}});